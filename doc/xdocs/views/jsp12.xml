<?xml version="1.0"?>
<document>
	<properties>
		<author email="andrew.petro@yale.edu">Andrew Petro</author>
		<title>Using JSP 1.2</title>
	</properties>
	<body>
		<section name="CAS3 uses JSP 2.0 by default">
			<p>CAS3 uses JSP 2.0 by default.  It uses the embedded expression language directly in its JSPs.</p>
			<p>Consider using a servlet container that supports JSP 2.0, e.g. Tomcat 5.x.</p>
		</section>
		<section name="Changing to use JSP 1.2">
		
		<subsection name="Changing the JSPs themselves">
			<p>To remove the requirement of support for JSP 2.0, you will need to (trivially) edit each JSP to use the JSTL &lt;c:out&gt; 
			tag in place of the JSP 2.0 expression language.</p>
			<p>Wherever the JSPs use the expression language directly, e.g.</p>
<source>
&lt;input type="hidden" name="lt" value="${flowExecutionId}" /&gt;
</source>
			<p>You'll need to instead use JSTL's &lt;c:out&gt; tag, e.g.</p>
<source>
&lt;input type="hidden" name="lt" value="&lt;c:out value="${flowExecutionId}"/&gt;" /&gt;
</source>

      <p>Wherever you use the JSTL &lt;c:out&gt; tag, you'll need to have declared the JSTL library in the JSP page header, e.g.</p>
      <source>
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
      </source>

      </subsection>
      <subsection name="Changing the web.xml">
			<p>You'll also need to change the web.xml declaration to declare the older document type (rather than the new schema) and so 
			convey to the servlet container that
			you're using the 2.3 version of the servlet specification.
			</p>
<source>
&lt;web-app 
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
    version="2.4"&gt;
			</source>
			<p>
			becomes
			</p>
<source>
&lt;!DOCTYPE web-app PUBLIC 
   "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" 
   "http://java.sun.com/dtd/web-app_2_3.dtd"&gt;
&lt;web-app&gt;
</source>
	
	    </subsection>
		</section>
	</body>
</document>